var hasOwnProperty=Object.prototype.hasOwnProperty;function isFunction(e){if(!e)return!1;var t=Object.prototype.toString.call(e);return'[object Function]'==t||'[object AsyncFunction]'==t}function isObject(e){return null!=e&&'[object Object]'==Object.prototype.toString.call(e)}function isString(e){return'[object String]'==toString.call(e)}function log(){if('object'==typeof console&&console.log){isString(arguments[0])&&(arguments[0]='sensors registerProperties————'+arguments[0]);try{return console.log.apply(console,arguments)}catch(e){console.log('sensors registerProperties————',arguments[0])}}}function each(e,t,r){var i=Array.prototype.forEach,o={};if(null==e)return!1;if(i&&e.forEach===i)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,s=e.length;n<s;n++)if(n in e&&t.call(r,e[n],n,e)===o)return!1}else for(var c in e)if(hasOwnProperty.call(e,c)&&t.call(r,e[c],c,e)===o)return!1}var _sa,RegisterProperties={plugin_name:'RegisterProperties'},register_list=[];function getRegisterProperties(e){var t={};return each(register_list,function(r){var i={};isFunction(r)?i=r({event:e.event,properties:e.properties,data:e}):-1!==r.events.indexOf(e.event)&&(i=r.properties);t=Object.assign(t,i)}),isObject(t)?t:{}}RegisterProperties.init=function(e){if(!e||!isObject(e))return log('\u8bf7\u4f20\u5165\u6b63\u786e\u7684 sensors \u5bf9\u8c61\uff01'),!1;(_sa=e).ee.data.on('beforeBuildCheck',function(e){if(isObject(e)&&'track'===e.type&&isObject(e.properties)){var t=getRegisterProperties(e);e=Object.assign(e.properties,t)}})},RegisterProperties.register=function(e){e&&isObject(e)?e.properties&&isObject(e.properties)&&e.events&&e.events.length>0&&register_list.push(e):log('\u53c2\u6570\u9519\u8bef\uff01')},RegisterProperties.hookRegister=function(e){isFunction(e)&&register_list.push(e)};export default RegisterProperties;